import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import '../../../provider/doctor_provider.dart';

class DoctorScreen extends StatelessWidget {
  final String doctorId;

  DoctorScreen({required this.doctorId});

  @override
  Widget build(BuildContext context) {
    final doctorProvider = Provider.of<DoctorProvider>(context);

    WidgetsBinding.instance.addPostFrameCallback((_) {
      doctorProvider.fetchDoctorById(doctorId);
    });

    return Scaffold(
      appBar: AppBar(
        title: Text('Doctor Details'),
      ),
      body: _buildBody(context, doctorProvider),
    );
  }

  Widget _buildBody(BuildContext context, DoctorProvider doctorProvider) {
    if (doctorProvider.isLoading) {
      return Center(
        child: CircularProgressIndicator(),
      );
    } else if (doctorProvider.error.isNotEmpty || doctorProvider.doctor == null) {
      return Center(
        child: Text(doctorProvider.error.isNotEmpty ? doctorProvider.error : 'Doctor not found'),
      );
    } else {
      final doctor = doctorProvider.doctor!;
      return SingleChildScrollView(
        padding: EdgeInsets.all(16.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              'Name: ${doctor.name}',
              style: TextStyle(fontSize: 18.0, fontWeight: FontWeight.bold),
            ),
            SizedBox(height: 8.0),
            Text('WardNumber: ${doctor.wardNumber}'),
            // Add more details as needed
          ],
        ),
      );
    }
  }
}
